{"version":3,"sources":["../../../Manage/Admin/client/js/blog-pages.js"],"names":["Vue","component","mixins","pagesMixin","data","loading","methods","deletePage","page","confirm","axios","delete","id","headers","$root","tok","then","idx","pages","findIndex","p","splice","parentId","isChild","pidx","parent","childCount","window","location","replace","toast","catch","toastError"],"mappings":"AAACA,GAAG,CAACC,SAAJ,CAAc,OAAd,CAAuB,CACpBC,MAAM,CAAE,CAACC,UAAD,CADY,CAEpBC,IAAI,CAAE,KAAO,CACTC,OAAO,GADE,CAAP,CAFc,CAKpBC,OAAO,CAAE,CACLC,UAAU,CAACC,CAAD,CAAO,CACTC,OAAO,CAAC,0EAAD,CADE,EAETC,KAAK,CAACC,MAAN,CAAc,uBAAsBH,CAAI,CAACI,EAAG,EAA5C,CAA+C,CAAEC,OAAO,CAAE,CAAE,aAAc,KAAKC,KAAL,CAAWC,GAA3B,CAAX,CAA/C,EACKC,IADL,CACU,IAAQ,CACV,GAAIC,CAAAA,CAAG,CAAG,KAAKC,KAAL,CAAWC,SAAX,CAAqBC,CAAC,EAAIA,CAAC,CAACR,EAAF,GAASJ,CAAI,CAACI,EAAxC,CAAV,CAGA,GAFA,KAAKM,KAAL,CAAWG,MAAX,CAAkBJ,CAAlB,CAAuB,CAAvB,CAEA,CAAoB,CAAhB,MAAKK,QAAT,CACI,GAAId,CAAI,CAACe,OAAT,CAAkB,IACVC,CAAAA,CAAI,CAAG,KAAKN,KAAL,CAAWC,SAAX,CAAqBC,CAAC,EAAIA,CAAC,CAACR,EAAF,GAAS,KAAKU,QAAxC,CADG,CAEVG,CAAM,CAAG,KAAKP,KAAL,CAAWM,CAAX,CAFC,CAGdC,CAAM,CAACC,UAAP,EACH,CAJD,IAMIC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,cAAxB,CANJ,CAUJ,KAAKf,KAAL,CAAWgB,KAAX,CAAiB,eAAjB,CACH,CAjBL,EAkBKC,KAlBL,CAkBW,UAAe,CAClB,KAAKjB,KAAL,CAAWkB,UAAX,CAAsB,qBAAtB,CAEH,CArBL,CAuBP,CA1BI,CALW,CAAvB,C","sourcesContent":["ï»¿Vue.component('pages', {\r\n    mixins: [pagesMixin],\r\n    data: () => ({\r\n        loading: false,\r\n    }),\r\n    methods: {\r\n        deletePage(page) {\r\n            if (confirm('Are you sure to permanently delete this page and its child pages if any?')) {\r\n                axios.delete(`/admin/pages?pageId=${page.id}`, { headers: { 'XSRF-TOKEN': this.$root.tok } })\r\n                    .then(resp => {\r\n                        let idx = this.pages.findIndex(p => p.id === page.id);\r\n                        this.pages.splice(idx, 1);\r\n\r\n                        if (this.parentId > 0) {\r\n                            if (page.isChild) {\r\n                                let pidx = this.pages.findIndex(p => p.id === this.parentId);\r\n                                let parent = this.pages[pidx];\r\n                                parent.childCount--;\r\n                            }\r\n                            else {\r\n                                window.location.replace('/admin/pages');\r\n                            }\r\n                        }\r\n\r\n                        this.$root.toast('Page deleted.');\r\n                    })\r\n                    .catch(function (err) {\r\n                        this.$root.toastError('Delete page failed.');\r\n                        console.log(err);\r\n                    });\r\n            }\r\n        },\r\n    },\r\n});\r\n"],"file":"blog-pages.js"}