{"version":3,"sources":["../../../Manage/Admin/client/js/login.js"],"names":["Vue","el","data","valid","userName","nameRules","v","trim","password","passwordRules","rememberMe","errMsg","computed","tok","document","querySelector","value","payload","methods","login","axios","post","headers","then","window","location","replace","getQueryParam","catch","name","url","href","regex","RegExp","results","exec","decodeURIComponent"],"mappings":"AAGA,GAAIA,CAAAA,GAAJ,CAAQ,CACJC,EAAE,CAAE,MADA,CAEJC,IAAI,CAAE,CACFC,KAAK,GADH,CAEFC,QAAQ,CAAE,EAFR,CAGFC,SAAS,CAAE,CACPC,CAAC,EAAI,CAAC,CAACA,CAAC,CAACC,IAAF,EAAF,EAAc,+BADZ,CAHT,CAMFC,QAAQ,CAAE,EANR,CAOFC,aAAa,CAAE,CACXH,CAAC,EAAI,CAAC,CAACA,CAAC,CAACC,IAAF,EAAF,EAAc,sBADR,CAPb,CAUFG,UAAU,GAVR,CAWFC,MAAM,CAAE,EAXN,CAFF,CAeJC,QAAQ,CAAE,CACNC,GAAG,CAAE,UAAY,CACb,MAAOC,CAAAA,QAAQ,CAACC,aAAT,CAAuB,6DAAvB,EAAkFC,KAC5F,CAHK,CAINC,OAAO,CAAE,UAAY,CACjB,MAAO,CACHb,QAAQ,CAAE,KAAKA,QADZ,CAEHI,QAAQ,CAAE,KAAKA,QAFZ,CAGHE,UAAU,CAAE,KAAKA,UAHd,CAKV,CAVK,CAfN,CA2BJQ,OAAO,CAAE,CACLC,KAAK,EAAG,CACJC,KAAK,CAACC,IAAN,CAAW,iBAAX,CAA8B,KAAKJ,OAAnC,CAA4C,CAAEK,OAAO,CAAE,CAAE,aAAc,KAAKT,GAArB,CAAX,CAA5C,EACKU,IADL,CACU,IAAQ,CACVC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,KAAKC,aAAL,CAAmB,WAAnB,GAAmC,QAA3D,CACH,CAHL,EAIKC,KAJL,CAIW,IAAO,CAEV,KAAKjB,MAAL,CAAc,iCACjB,CAPL,CAQH,CAVI,CAYLgB,aAAa,CAACE,CAAD,CAAO,CAChB,GAAIC,CAAAA,CAAG,CAAGN,MAAM,CAACC,QAAP,CAAgBM,IAA1B,CACAF,CAAI,CAAGA,CAAI,CAACH,OAAL,CAAa,SAAb,CAAwB,MAAxB,CAFS,CAGhB,GAAIM,CAAAA,CAAK,CAAG,GAAIC,CAAAA,MAAJ,CAAW,OAASJ,CAAT,CAAgB,mBAA3B,CAAZ,CACIK,CAAO,CAAGF,CAAK,CAACG,IAAN,CAAWL,CAAX,CADd,CAHgB,MAKXI,CAAAA,CALW,CAMXA,CAAO,CAAC,CAAD,CANI,CAOTE,kBAAkB,CAACF,CAAO,CAAC,CAAD,CAAP,CAAWR,OAAX,CAAmB,KAAnB,CAA0B,GAA1B,CAAD,CAPT,CAMQ,EANR,CAKK,IAGxB,CApBI,CA3BL,CAAR,C","sourcesContent":["ï»¿/**\r\n * @see Login.cshtml\r\n */\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        valid: false,\r\n        userName: '',\r\n        nameRules: [\r\n            v => !!v.trim() || 'Email or username is required',\r\n        ],\r\n        password: '',\r\n        passwordRules: [\r\n            v => !!v.trim() || 'Password is required',\r\n        ],\r\n        rememberMe: false,\r\n        errMsg: '',\r\n    },\r\n    computed: {\r\n        tok: function () {\r\n            return document.querySelector('input[name=\"__RequestVerificationToken\"][type=\"hidden\"]').value;\r\n        },\r\n        payload: function () {\r\n            return {\r\n                userName: this.userName,\r\n                password: this.password,\r\n                rememberMe: this.rememberMe,\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        login() {\r\n            axios.post('/api/auth/login', this.payload, { headers: { 'XSRF-TOKEN': this.tok } })\r\n                .then(resp => {\r\n                    window.location.replace(this.getQueryParam('ReturnUrl') || '/admin');\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.errMsg = 'Login failed, please try again!';\r\n                });\r\n        },\r\n        // https://stackoverflow.com/a/901144/32240\r\n        getQueryParam(name) {\r\n            let url = window.location.href;\r\n            name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n            let regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n                results = regex.exec(url);\r\n            if (!results) return null;\r\n            if (!results[2]) return '';\r\n            return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n        }\r\n    }\r\n})"],"file":"login.js"}