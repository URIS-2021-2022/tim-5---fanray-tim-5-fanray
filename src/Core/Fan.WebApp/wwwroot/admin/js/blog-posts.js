Vue.component("blog-posts",{mixins:[blogPostsMixin],data:()=>({pagination:{},loading:!1}),watch:{pagination:{handler(){0===this.activeStatus?this.activeStatus="published":1===this.activeStatus&&(this.activeStatus="draft"),this.getPosts(this.activeStatus)},deep:!0}},computed:{active:{get:function(){return"published"===this.activeStatus?0:1},set:function(){}}},methods:{getPosts(a){this.activeStatus=a,this.loading=!0;let b=`/admin/posts?handler=posts&status=${this.activeStatus}&pageNumber=${this.pagination.page}&pageSize=${this.pagination.rowsPerPage}`;axios.get(b).then(a=>{if(this.posts=a.data.posts,this.totalPosts=a.data.totalPosts,this.statuses=a.data.statuses,this.publishedCount=a.data.publishedCount,this.draftCount=a.data.draftCount,window.location.href.endsWith("/admin/posts"))history.pushState({},null,window.location.href+`/${this.activeStatus}`);else if(window.location.href.endsWith("/admin/posts/published")||window.location.href.endsWith("/admin/posts/draft")){let a="/admin/posts/"+this.activeStatus;history.pushState({},null,a)}}).catch(function(){}),this.loading=!1},deletePost(a){const b=this.posts.indexOf(a);if(confirm("You are permanently deleting this post, are you sure?")){this.loading=!0;let c=`/admin/posts?postId=${a.id}&status=${this.activeStatus}&pageNumber=${this.pagination.page}&pageSize=${this.pagination.rowsPerPage}`;axios.delete(c,{headers:{"XSRF-TOKEN":this.$root.tok}}).then(a=>{this.posts.splice(b,1),this.posts=a.data.posts,this.totalPosts=a.data.totalPosts,this.statuses=a.data.statuses,this.draftCount=a.data.draftCount,this.publishedCount=a.data.publishedCount}).catch(function(){}),this.loading=!1}}}});
//# sourceMappingURL=blog-posts.js.map