{"version":3,"sources":["../../../Manage/Admin/client/js/plugins.js"],"names":["Vue","component","mixins","pluginsMixin","data","headers","text","value","sortable","dialogVisible","dialogTitle","settingsUrl","mounted","initSettingsUpdatedHandler","methods","activate","plugin","axios","post","folder","$root","then","resp","active","id","catch","toastError","deactivate","viewSettings","name","closeDialog","self","window","document","addEventListener","e","toast","detail","msg"],"mappings":"AAACA,GAAG,CAACC,SAAJ,CAAc,SAAd,CAAyB,CACtBC,MAAM,CAAE,CAACC,YAAD,CADc,CAEtBC,IAAI,CAAE,KAAO,CACTC,OAAO,CAAE,CACL,CAAEC,IAAI,CAAE,QAAR,CAAkBC,KAAK,CAAE,QAAzB,CADK,CAEL,CAAED,IAAI,CAAE,aAAR,CAAuBC,KAAK,CAAE,aAA9B,CAA6CC,QAAQ,GAArD,CAFK,CAGL,CAAEF,IAAI,CAAE,SAAR,CAAmBC,KAAK,CAAE,SAA1B,CAAqCC,QAAQ,GAA7C,CAHK,CADA,CAMTC,aAAa,GANJ,CAOTC,WAAW,CAAE,EAPJ,CAQTC,WAAW,CAAE,IARJ,CAAP,CAFgB,CAYtBC,OAAO,EAAG,CACN,KAAKC,0BAAL,EACH,CAdqB,CAetBC,OAAO,CAAE,CACLC,QAAQ,CAACC,CAAD,CAAS,CAEbC,KAAK,CAACC,IAAN,CAAW,iCAAX,CAA8C,CAAEC,MAAM,CAAEH,CAAM,CAACG,MAAjB,CAA9C,CAAyE,KAAKC,KAAL,CAAWf,OAApF,EACKgB,IADL,CACUC,CAAI,EAAI,CAEVN,CAAM,CAACO,MAAP,GAFU,CAGVP,CAAM,CAACQ,EAAP,CAAYF,CAAI,CAAClB,IACpB,CALL,EAMKqB,KANL,CAMW,IAAO,CAEV,KAAKL,KAAL,CAAWM,UAAX,CAAsB,yBAAtB,CACH,CATL,CAUH,CAbI,CAcLC,UAAU,CAACX,CAAD,CAAS,CAEfC,KAAK,CAACC,IAAN,CAAW,mCAAX,CAAgD,CAAEM,EAAE,CAAER,CAAM,CAACQ,EAAb,CAAhD,CAAmE,KAAKJ,KAAL,CAAWf,OAA9E,EACKgB,IADL,CACU,IAAQ,CAEVL,CAAM,CAACO,MAAP,GACH,CAJL,EAKKE,KALL,CAKW,IAAO,CAEV,KAAKL,KAAL,CAAWM,UAAX,CAAsB,2BAAtB,CACH,CARL,CASH,CAzBI,CA0BLE,YAAY,CAACZ,CAAD,CAAS,CACjB,KAAKN,WAAL,CAAmBM,CAAM,CAACa,IADT,CAEjB,KAAKpB,aAAL,GAFiB,CAGjB,KAAKE,WAAL,CAAmBK,CAAM,CAACL,WAC7B,CA9BI,CA+BLmB,WAAW,EAAG,CACV,KAAKrB,aAAL,GACH,CAjCI,CAkCLI,0BAA0B,EAAG,CACzB,GAAIkB,CAAAA,CAAI,CAAG,IAAX,CACAC,MAAM,CAACC,QAAP,CAAgBC,gBAAhB,CAAiC,oBAAjC,CAAuDC,CAAC,EAAI,CACxDJ,CAAI,CAACX,KAAL,CAAWgB,KAAX,CAAiBD,CAAC,CAACE,MAAF,CAASC,GAA1B,CADwD,CAExDP,CAAI,CAACD,WAAL,EACH,CAHD,CAIH,CAxCI,CAfa,CAAzB,C","sourcesContent":["ï»¿Vue.component('plugins', {\r\n    mixins: [pluginsMixin],\r\n    data: () => ({\r\n        headers: [\r\n            { text: 'Plugin', value: 'plugin' },\r\n            { text: 'Description', value: 'description', sortable: false },\r\n            { text: 'Actions', value: 'actions', sortable: false }\r\n        ],\r\n        dialogVisible: false,\r\n        dialogTitle: '',\r\n        settingsUrl: null,\r\n    }),\r\n    mounted() {\r\n        this.initSettingsUpdatedHandler();\r\n    },\r\n    methods: {\r\n        activate(plugin) {\r\n            console.log('activate: ', plugin);\r\n            axios.post('/admin/plugins?handler=activate', { folder: plugin.folder }, this.$root.headers)\r\n                .then(resp => {\r\n                    console.log('activated: ', resp.data);\r\n                    plugin.active = true;\r\n                    plugin.id = resp.data;\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.$root.toastError('Activate plugin failed.');\r\n                });\r\n        },\r\n        deactivate(plugin) {\r\n            console.log('deactivate: ', plugin);\r\n            axios.post('/admin/plugins?handler=deactivate', { id: plugin.id }, this.$root.headers)\r\n                .then(resp => {\r\n                    console.log('deactivated: ', resp.data);\r\n                    plugin.active = false;\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.$root.toastError('Deactivate plugin failed.');\r\n                });\r\n        },\r\n        viewSettings(plugin) {\r\n            this.dialogTitle = plugin.name;\r\n            this.dialogVisible = true;\r\n            this.settingsUrl = plugin.settingsUrl;\r\n        },\r\n        closeDialog() {\r\n            this.dialogVisible = false;\r\n        },\r\n        initSettingsUpdatedHandler() {\r\n            let self = this;\r\n            window.document.addEventListener('ExtSettingsUpdated', e => {\r\n                self.$root.toast(e.detail.msg);\r\n                self.closeDialog();\r\n            });\r\n        },\r\n    }\r\n});\r\n"],"file":"plugins.js"}