{"version":3,"sources":["../../../Manage/Admin/client/js/site-users.js"],"names":["Vue","component","mixins","siteUsersMixin","data","dialog","editDialog","headers","text","value","sortable","editedIndex","editedUser","email","displayName","userName","password","passwordVisible","role","defaultUser","rules","emailRules","v","test","userNameRules","length","displayNameRules","passwordRules","required","trim","min","pagination","loading","errMsg","methods","addUser","close","Object","assign","$refs","form","reset","save","selectedRole","axios","post","$root","then","resp","users","push","catch","err","response","toastError","editUser","user","alert","lockUser"],"mappings":"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","sourcesContent":["ï»¿Vue.component('site-users', {\r\n    mixins: [siteUsersMixin],\r\n    data: () => ({\r\n        dialog: false,\r\n        editDialog: false,\r\n        headers: [\r\n            { text: '', value: 'avatar', sortable: false },\r\n            { text: 'Display Name', value: 'displayName' },\r\n            { text: 'Username', value: 'userName' },\r\n            { text: 'Joined On', value: 'joinedOn' },\r\n            { text: 'Locked Out', value: 'lockedOut' },\r\n            { text: 'Role', value: 'role' },\r\n            { text: 'Actions', value: 'name', sortable: false }\r\n        ],\r\n        editedIndex: -1,\r\n        editedUser: {\r\n            email: '',\r\n            displayName: '',\r\n            userName: '',\r\n            password: '',\r\n            passwordVisible: false,\r\n            role: '',\r\n        },\r\n        defaultUser: {\r\n            email: '',\r\n            displayName: '',\r\n            userName: '',\r\n            password: '',\r\n            passwordVisible: false,\r\n            role: '',\r\n        },\r\n        rules: {\r\n            emailRules: [\r\n                v => !!v || 'Required',\r\n                v => /.+@.+/.test(v) || 'Email must be valid',\r\n            ],\r\n            userNameRules: [\r\n                v => !!v || 'Required',\r\n                v => (!!v && v.length >= 2) || 'Min 2 characters',\r\n                v => (!!v && v.length <= 24) || 'Max 20 characters',\r\n                v => /^[a-zA-Z0-9-_]+$/.test(v) || 'Alphanumeric, dash, underscore only',\r\n            ],\r\n            displayNameRules: [\r\n                v => !!v || 'Required',\r\n                v => (!!v && v.length >= 2) || 'Min 2 characters',\r\n                v => (!!v && v.length <= 24) || 'Max 24 characters',\r\n            ],\r\n            passwordRules: {\r\n                required: v => (!!v && !!v.trim()) || 'Required',\r\n                min: v => (!!v && v.length >= 8) || 'Min 8 characters',\r\n            },\r\n        },\r\n        pagination: {},\r\n        loading: false,\r\n        errMsg: '',\r\n    }),\r\n    methods: {\r\n        /**\r\n         * Open dialog to add a new user.\r\n         */\r\n        addUser() {\r\n            this.dialog = true;\r\n        },\r\n        /**\r\n         * Close dialog and reset form.\r\n         */\r\n        close() {\r\n            this.dialog = false;\r\n            this.editedUser = Object.assign({}, this.defaultUser);\r\n            this.editedIndex = -1;\r\n            this.$refs.form.reset();\r\n            this.errMsg = '';\r\n        },\r\n        /**\r\n         * Upsert a user.\r\n         */\r\n        save() {\r\n            this.editedUser.role = this.selectedRole;\r\n            console.log('Edited User: ', this.editedUser);\r\n            axios.post('/admin/users', this.editedUser, this.$root.headers)\r\n                .then(resp => {\r\n                    console.log('Returned user: ', resp.data);\r\n                    if (this.editedIndex > -1) { // update todo\r\n                        Object.assign(this.users[this.editedIndex], this.editedUser)\r\n                    } else { // insert\r\n                        this.users.push(resp.data);\r\n                    }\r\n                    this.close();\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.errMsg = err.response.data;\r\n                    this.$root.toastError('Add user failed.');   \r\n                });\r\n        },\r\n        /**\r\n         * Edit user role.\r\n         * @param {any} user\r\n         */\r\n        editUser(user) {\r\n            alert(`This feature is coming soon.`);\r\n            //this.editedIndex = this.users.indexOf(user)\r\n            //this.editedUser = Object.assign({}, user)\r\n            //this.editDialog = true\r\n        },\r\n        /**\r\n         * Lock user out.\r\n         * @param {any} user\r\n         */\r\n        lockUser(user) {\r\n            alert(`This feature is coming soon.`);\r\n        }\r\n    },\r\n});\r\n"],"file":"site-users.js"}