{"version":3,"sources":["../../../Manage/Admin/client/js/admin.js"],"names":["Vue","el","mixins","adminMixin","data","drawer","snackbar","show","text","color","timeout","computed","tok","document","querySelector","value","headers","mounted","initActiveNav","initWindowEventHandlers","methods","url","window","location","pathname","adminNavs","forEach","nav","active","startsWith","addEventListener","e","toastError","detail","response","updateIframeHeight","logout","axios","post","then","catch","toast","initIframeHeight","ifrm","style","height","contentWindow","body","scrollHeight","h","$refs","exts","settingsIframe"],"mappings":"AAAC,GAAIA,CAAAA,GAAJ,CAAQ,CACLC,EAAE,CAAE,MADC,CAELC,MAAM,CAAE,CAACC,UAAD,CAFH,CAGLC,IAAI,CAAE,KAAO,CACTC,MAAM,CAAE,IADC,CAETC,QAAQ,CAAE,CACNC,IAAI,GADE,CAENC,IAAI,CAAE,EAFA,CAGNC,KAAK,CAAE,EAHD,CAINC,OAAO,CAAE,CAJH,CAFD,CAAP,CAHD,CAYLC,QAAQ,CAAE,CACNC,GAAG,EAAG,CACF,MAAOC,CAAAA,QAAQ,CAACC,aAAT,CAAuB,6DAAvB,EAAkFC,KAC5F,CAHK,CAINC,OAAO,EAAG,CACN,MAAO,CAAEA,OAAO,CAAE,CAAE,aAAc,KAAKJ,GAArB,CAAX,CACV,CANK,CAZL,CAoBLK,OAAO,EAAG,CACN,KAAKC,aAAL,EADM,CAEN,KAAKC,uBAAL,EACH,CAvBI,CAwBLC,OAAO,CAAE,CAILF,aAAa,EAAG,CACZ,GAAIG,CAAAA,CAAG,CAAGC,MAAM,CAACC,QAAP,CAAgBC,QAA1B,CACA,KAAKC,SAAL,CAAeC,OAAf,CAAuBC,CAAG,EAAIA,CAAG,CAACC,MAAJ,CAAaP,CAAG,CAACQ,UAAJ,CAAeF,CAAG,CAACN,GAAnB,CAA3C,CACH,CAPI,CAQLF,uBAAuB,EAAG,CACtBG,MAAM,CAACT,QAAP,CAAgBiB,gBAAhB,CAAiC,sBAAjC,CAAyDC,CAAC,EAAI,CAE1D,KAAKC,UAAL,CAAgBD,CAAC,CAACE,MAAF,CAASC,QAAT,CAAkB9B,IAAlC,CACH,CAHD,CADsB,CAKtBkB,MAAM,CAACT,QAAP,CAAgBiB,gBAAhB,CAAiC,6BAAjC,CAAgEC,CAAC,EAAI,CAEjE,KAAKI,kBAAL,CAAwBJ,CAAC,CAACE,MAA1B,CACH,CAHD,CAIH,CAjBI,CAkBLG,MAAM,EAAG,CAELC,KAAK,CAACC,IAAN,CAAW,cAAX,CAA2B,IAA3B,CAAiC,KAAKtB,OAAtC,EACKuB,IADL,CACU,IAAMjB,MAAM,CAACC,QAAP,CAAkB,GADlC,EAEKiB,KAFL,CAEW,UAFX,CAGH,CAvBI,CA8BLC,KAAK,CAACjC,CAAD,CAAOE,CAAO,CAAG,GAAjB,CAAuBD,CAAK,CAAG,QAA/B,CAAyC,CAC1C,KAAKH,QAAL,CAAcC,IAAd,GAD0C,CAE1C,KAAKD,QAAL,CAAcE,IAAd,CAAqBA,CAFqB,CAG1C,KAAKF,QAAL,CAAcG,KAAd,CAAsBA,CAHoB,CAI1C,KAAKH,QAAL,CAAcI,OAAd,CAAwBA,CAC3B,CAnCI,CAoCLsB,UAAU,CAACxB,CAAD,CAAOE,CAAO,CAAG,GAAjB,CAAuB,CAC7B,KAAKJ,QAAL,CAAcC,IAAd,GAD6B,CAE7B,KAAKD,QAAL,CAAcE,IAAd,CAAqBA,CAFQ,CAG7B,KAAKF,QAAL,CAAcG,KAAd,CAAsB,KAHO,CAI7B,KAAKH,QAAL,CAAcI,OAAd,CAAwBA,CAC3B,CAzCI,CA8CLgC,gBAAgB,CAACC,CAAD,CAAO,CACnBA,CAAI,CAACC,KAAL,CAAWC,MAAX,CAAoB,CADD,CAEnBF,CAAI,CAACC,KAAL,CAAWC,MAAX,CAAoBF,CAAI,CAACG,aAAL,CAAmBjC,QAAnB,CAA4BkC,IAA5B,CAAiCC,YAAjC,CAAgD,IACvE,CAjDI,CAsDLb,kBAAkB,CAACc,CAAD,CAAI,CAClB,GAAIN,CAAAA,CAAI,CAAG,KAAKO,KAAL,CAAWC,IAAX,CAAgBD,KAAhB,CAAsBE,cAAjC,CACAT,CAAI,CAACC,KAAL,CAAWC,MAAX,CAAoBI,CAAC,CAAG,IAC3B,CAzDI,CAxBJ,CAAR,C","sourcesContent":["ï»¿new Vue({\r\n    el: '#app',\r\n    mixins: [adminMixin],\r\n    data: () => ({\r\n        drawer: null,\r\n        snackbar: {\r\n            show: false,\r\n            text: '',\r\n            color: '',\r\n            timeout: 0,\r\n        },\r\n    }),\r\n    computed: {\r\n        tok() {\r\n            return document.querySelector('input[name=\"__RequestVerificationToken\"][type=\"hidden\"]').value;\r\n        },\r\n        headers() {\r\n            return { headers: { 'XSRF-TOKEN': this.tok } };\r\n        },\r\n    },\r\n    mounted() {\r\n        this.initActiveNav();\r\n        this.initWindowEventHandlers();\r\n    },\r\n    methods: {\r\n        /**\r\n         * Make the current admin side nav active.\r\n         */\r\n        initActiveNav() {\r\n            let url = window.location.pathname;\r\n            this.adminNavs.forEach(nav => nav.active = url.startsWith(nav.url));\r\n        },\r\n        initWindowEventHandlers() {\r\n            window.document.addEventListener('ExtSettingsUpdateErr', e => {\r\n                console.error('ExtSettingsUpdateErr: ', e);\r\n                this.toastError(e.detail.response.data);\r\n            });\r\n            window.document.addEventListener('ExtSettingsIfrmHeightUpdate', e => {\r\n                console.log('ExtSettingsIfrmHeightUpdate: ', e.detail);\r\n                this.updateIframeHeight(e.detail);\r\n            });\r\n        },\r\n        logout() {\r\n            console.log('logout');\r\n            axios.post('/home/logout', null, this.headers)\r\n                .then(() => window.location = '/')\r\n                .catch((err) => console.log(err));\r\n        },\r\n        /**\r\n         * \r\n         * @param {any} text\r\n         * @param {any} timeout  Use 0 to keep open indefinitely.\r\n         * @param {any} color\r\n         */\r\n        toast(text, timeout = 3000, color = 'silver') {\r\n            this.snackbar.show = true;\r\n            this.snackbar.text = text;\r\n            this.snackbar.color = color;\r\n            this.snackbar.timeout = timeout;\r\n        },\r\n        toastError(text, timeout = 3000) {\r\n            this.snackbar.show = true;\r\n            this.snackbar.text = text;\r\n            this.snackbar.color = 'red';\r\n            this.snackbar.timeout = timeout;\r\n        },\r\n        /**\r\n        * A hack to make iframe height same as its content.\r\n        * https://stackoverflow.com/a/9976309/32240\r\n        */\r\n        initIframeHeight(ifrm) {\r\n            ifrm.style.height = 0; // first reset ifrm to start fresh\r\n            ifrm.style.height = ifrm.contentWindow.document.body.scrollHeight + 'px';\r\n        },\r\n        /**\r\n         * Adjust extensions (plugins, widgets) component's settings dialog height.\r\n         * @param h\r\n         */\r\n        updateIframeHeight(h) {\r\n            let ifrm = this.$refs.exts.$refs.settingsIframe;\r\n            ifrm.style.height = h + 'px';\r\n        },\r\n    }\r\n});\r\n"],"file":"admin.js"}